<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Underground Hold'em</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Cinzel:wght@500;700&family=Rajdhani:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app-bg"></div>
    <section class="home-screen" id="homeScreen" aria-label="Home Screen">
      <div class="home-shell">
        <p class="home-kicker">UNDERGROUND TABLE</p>
        <h1 class="home-title">NO-LIMIT HOLD'EM</h1>
        <p class="home-copy">연속 핸드와 스테이지를 돌파하며 마지막까지 칩을 지키세요.</p>
        <div class="home-actions">
          <button class="home-btn primary" id="startGameBtn" type="button">Start Game</button>
          <button class="home-btn" id="homeGuideBtn" type="button" aria-expanded="false" aria-controls="homeGuidePanel">How To Guide</button>
          <button class="home-btn" id="homeSoundBtn" type="button">Sound On</button>
        </div>
        <section class="home-guide hidden" id="homeGuidePanel" aria-live="polite">
          <div class="home-guide-head">
            <div class="home-guide-title-wrap">
              <span class="home-guide-kicker">BEGINNER QUICK GUIDE</span>
              <h2 class="home-guide-title">게임 가이드</h2>
            </div>
            <button class="home-guide-close" id="homeGuideCloseBtn" type="button" aria-label="가이드 닫기">닫기</button>
          </div>
          <div class="home-guide-layout">
            <article class="home-guide-card">
              <h3>빠른 시작</h3>
              <ol class="home-guide-steps">
                <li><strong>Start Game</strong> 버튼으로 첫 핸드를 시작합니다.</li>
                <li>내 턴에는 <strong>Fold / Check(Call) / Raise</strong> 중 하나를 선택합니다.</li>
                <li><strong>Peek Cards</strong> 버튼(또는 P 키 홀드)으로 홀카드를 확인합니다.</li>
                <li>NPC 3명을 모두 파산시키면 다음 스테이지로 진행됩니다.</li>
              </ol>
            </article>

            <article class="home-guide-card">
              <h3>핵심 룰</h3>
              <ul class="home-guide-list">
                <li>각 핸드는 프리플랍 → 플랍 → 턴 → 리버 → 쇼다운 순서입니다.</li>
                <li>SB/BB는 핸드마다 시계 방향으로 이동합니다.</li>
                <li>턴 타이머 종료 시 자동으로 폴드 처리됩니다.</li>
                <li>최종 승부는 7장 중 가장 높은 5장 조합으로 결정됩니다.</li>
              </ul>
            </article>

            <article class="home-guide-card">
              <h3>조작 키</h3>
              <div class="home-guide-key-grid">
                <div class="home-guide-key-row"><kbd>F</kbd><span>Fold</span></div>
                <div class="home-guide-key-row"><kbd>C</kbd><span>Check / Call</span></div>
                <div class="home-guide-key-row"><kbd>R</kbd><span>Raise</span></div>
                <div class="home-guide-key-row"><kbd>P</kbd><span>Peek (홀드)</span></div>
                <div class="home-guide-key-row"><kbd>N</kbd><span>Next Hand</span></div>
                <div class="home-guide-key-row"><kbd>H</kbd><span>Replay</span></div>
              </div>
            </article>

            <article class="home-guide-card">
              <h3>포커 족보 (높음 → 낮음)</h3>
              <ol class="home-guide-rank-list">
                <li>스트레이트 플러시</li>
                <li>포카드</li>
                <li>풀하우스</li>
                <li>플러시</li>
                <li>스트레이트</li>
                <li>트리플</li>
                <li>투페어</li>
                <li>원페어</li>
                <li>하이카드</li>
              </ol>
            </article>

            <article class="home-guide-card home-guide-card-wide">
              <h3>실전 팁</h3>
              <ul class="home-guide-list">
                <li>초반에는 무리한 올인보다 포지션과 콜 금액을 먼저 체크하세요.</li>
                <li>상대 베팅 크기가 갑자기 커지면 강한 족보 가능성을 의심하세요.</li>
                <li>미완성 드로우 카드만 보고 큰 배팅을 따라가면 손해가 커집니다.</li>
                <li>칩이 줄어들면 레이즈 빈도를 낮추고 콜 범위를 좁혀 생존을 우선하세요.</li>
              </ul>
            </article>
          </div>
        </section>
      </div>
    </section>
    <main class="table-scene" id="tableScene">
      <header class="top-bar">
        <div class="top-left">
          <div class="brand">
            <span class="brand-main">UNDERGROUND</span>
            <span class="brand-sub">NO-LIMIT HOLD'EM</span>
          </div>
          <div class="board-mini" id="boardMini" aria-live="polite">
            <span class="board-mini-label" id="boardMiniLabel">BOARD</span>
            <div class="board-mini-cards" id="boardMiniCards"></div>
          </div>
        </div>
        <div class="meta">
          <div class="chip-stack chip-stack-accent" id="stageInfo">Stage 1 · Back Room</div>
          <div class="chip-stack" id="blindInfo">Blinds 10 / 20</div>
          <div class="chip-stack" id="blindLevel">Level 1 · Hand 0</div>
          <div class="chip-stack chip-stack-accent" id="blindPositions">SB -- / BB --</div>
          <label class="skin-select-wrap" for="skinSelect">
            <span>Skin</span>
            <select id="skinSelect" aria-label="Table skin">
              <option value="classic">Classic</option>
              <option value="neon">Neon</option>
              <option value="velvet">Velvet</option>
            </select>
          </label>
          <button class="next-hand tertiary" id="performanceToggle" type="button">Performance High</button>
          <button class="next-hand tertiary" id="soundToggle" type="button">Sound On</button>
          <button class="next-hand secondary" id="replayBtn" disabled>Replay</button>
          <button class="next-hand" id="nextHandBtn" disabled>Next Hand</button>
        </div>
      </header>

      <section class="table-wrap">
        <div class="room-props" aria-hidden="true">
          <div class="prop lamp lamp-left"></div>
          <div class="prop lamp lamp-right"></div>
          <div class="prop stack stack-left"></div>
          <div class="prop stack stack-right"></div>
          <div class="prop glass"></div>
          <div class="prop cigar"></div>
          <div class="prop deck"></div>
          <div class="prop ashtray"></div>
        </div>

        <div class="table-rig">
          <div id="poker3dViewport" aria-hidden="true"></div>

          <div class="table-oval">
            <div class="table-rail"></div>
            <div class="felt-glow"></div>
            <div class="table-front-edge"></div>

            <div class="dealer-npc" aria-hidden="true">
              <div class="dealer-head"></div>
              <div class="dealer-body"></div>
              <div class="dealer-arm dealer-arm-left"></div>
              <div class="dealer-arm dealer-arm-right"></div>
              <div class="dealer-hands"></div>
            </div>

            <div class="community-zone">
              <div class="pot-label">POT</div>
              <div class="pot-amount" id="potAmount">0</div>
              <div class="community-cards" id="communityCards"></div>
            </div>
          </div>

          <div class="deal-layer" id="dealLayer" aria-hidden="true"></div>
          <section class="tutorial-panel" id="tutorialPanel" aria-live="polite">
            <div class="tutorial-title">Quick Keys</div>
            <div class="tutorial-grid">
              <span><kbd>F</kbd> Fold</span>
              <span><kbd>C</kbd> Check/Call</span>
              <span><kbd>R</kbd> Raise</span>
              <span><kbd>P</kbd> Peek (hold)</span>
              <span><kbd>N</kbd> Next Hand</span>
              <span><kbd>H</kbd> Replay</span>
            </div>
            <button id="tutorialDismissBtn" type="button">Close Tips</button>
          </section>
          <button class="tutorial-toggle hidden" id="tutorialToggleBtn" type="button" aria-label="Show quick guide" aria-expanded="true">
            Quick Guide
          </button>
          <section class="stage-banner" id="stageBanner" aria-live="polite">
            <div class="stage-banner-title" id="stageBannerTitle"></div>
            <div class="stage-banner-sub" id="stageBannerSub"></div>
          </section>
          <section class="game-over-modal hidden" id="gameOverModal" aria-live="assertive">
            <div class="game-over-card">
              <p class="game-over-kicker">RUN FAILED</p>
              <h2 class="game-over-title" id="gameOverTitle">GAME OVER</h2>
              <p class="game-over-sub" id="gameOverSub">칩을 모두 잃었습니다.</p>
              <button class="next-hand secondary" id="restartRunBtn" type="button">Restart Run</button>
            </div>
          </section>
          <section class="corner-cards-hud" id="cornerCardsHud" aria-live="polite">
            <div class="corner-cards-block">
              <div class="corner-cards-label">MY HAND</div>
              <div class="corner-cards-row hero" id="cornerHeroCards"></div>
            </div>
            <div class="corner-cards-block">
              <div class="corner-cards-label">BOARD</div>
              <div class="corner-cards-row board" id="cornerBoardCards"></div>
            </div>
          </section>

          <div class="seat seat-top" data-seat="0"></div>
          <div class="seat seat-right" data-seat="1"></div>
          <div class="seat seat-bottom" data-seat="2"></div>
          <div class="seat seat-left" data-seat="3"></div>
        </div>

        <aside class="table-side" aria-label="Hand Readout">
          <section class="hand-readout" id="inHandReadout" aria-live="polite">
            <div class="hand-readout-head">
              <span id="inHandTitle">IN HAND 0</span>
              <span id="inHandMeta">READY</span>
            </div>
            <div class="hand-readout-list" id="inHandList"></div>
          </section>
          <section class="showdown-panel" id="showdownPanel" aria-live="polite"></section>
        </aside>
      </section>

      <section class="action-panel">
        <div class="status-row">
          <div class="status-main" id="statusMain">Start a new hand.</div>
          <div class="status-sub" id="statusSub">You are seat 3.</div>
        </div>

        <div class="controls" id="controls">
          <button id="foldBtn" disabled>Fold</button>
          <button id="checkCallBtn" disabled>Check</button>
          <button id="peekBtn" disabled>Peek Cards</button>
          <div class="raise-control">
            <label for="raiseRange">Raise</label>
            <input type="range" id="raiseRange" min="20" max="200" value="40" step="10" disabled />
            <div class="raise-amount" id="raiseAmount">40</div>
            <button id="raiseBtn" disabled>Raise To</button>
          </div>
        </div>
      </section>
    </main>

    <template id="seatTemplate">
      <div class="seat-inner">
        <div class="seat-head">
          <span class="name"></span>
          <div class="seat-tags">
            <span class="blind-badge"></span>
            <span class="dealer-chip">D</span>
          </div>
        </div>
        <div class="avatar-wrap">
          <div class="avatar-figure">
            <div class="avatar-head"></div>
            <div class="avatar-neck"></div>
            <div class="avatar-torso"></div>
            <div class="avatar-arm arm-left"></div>
            <div class="avatar-arm arm-right"></div>
          </div>
        </div>
        <div class="cards"></div>
        <div class="seat-meta">
          <span class="chips"></span>
          <span class="bet"></span>
        </div>
        <div class="action-tag"></div>
      </div>
    </template>

    <script src="vendor/three/three.min.js"></script>
    <script src="vendor/three/GLTFLoader.js"></script>
    <script src="vendor/three/SkeletonUtils.js"></script>
    <script src="poker3d3.js"></script>
    <script src="game.js"></script>
  </body>
</html>
